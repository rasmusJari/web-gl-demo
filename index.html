<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Game Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        @font-face {
            font-family: "KauflandBold";
            src: url("assets/kaufland-bold.otf") format("opentype");
            font-weight: normal;
            font-style: normal;
        }

        html,
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
          //  font-family: "KauflandBold", sans-serif;
        }

        #unity-canvas {
            width: 100vw;
            height: 100dvh;
            display: block;
            background: #e10915;
        }

        #loadingBox {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background: #e10915;
            z-index: 10;
            width: 100%;
            height: 50vh;

            .loading-text {
                color: white;
                margin-bottom: 10px;
                font-size: 24px;
                text-align: center;
            }
        }

        /*@keyframes stepFade {*/
        /*    0% {*/
        /*        opacity: 0;*/
        /*        transform: scale(0.8);*/
        /*    }*/
        /*    20% {*/
        /*        opacity: 1;*/
        /*        transform: scale(1);*/
        /*    }*/
        /*    80% {*/
        /*        opacity: 1;*/
        /*    }*/
        /*    100% {*/
        /*        opacity: 0;*/
        /*    }*/
        /*}*/
        
        /*.foot-left,*/
        /*.foot-right {*/
        /*    background-size: contain;*/
        /*    background-repeat: no-repeat;*/
        /*    position: absolute;*/
        /*    right: 0;*/
        /*    bottom: 0;*/
        /*    width: 36px;*/
        /*    height: 60px;*/
        /*    rotate: 180deg;*/
        /*    opacity: 0;*/
        /*    animation: stepFade 1s ease forwards;*/
        /*}*/
        
        /*.foot-left {*/
        
        /*    background-image: url("./assets/left.png");*/
        /*}*/
        
        /*.foot-right {*/
        
        /*    background-image: url("./assets/right.png");*/
        /*}*/
    </style>
</head>
<body>


<canvas id="unity-canvas"></canvas>

<script src="Build/app.loader.js"></script>
<script>
    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        const meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.head.appendChild(meta);

        const canvas = document.getElementById("unity-canvas");
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        canvas.style.position = "fixed";

        document.body.style.textAlign = "left";

    }

    createUnityInstance(document.getElementById("unity-canvas"), {
        arguments: [],
        dataUrl: "Build/app.data.unityweb",
        frameworkUrl: "Build/app.framework.js.unityweb",
        codeUrl: "Build/app.wasm.unityweb",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
    productName: "spikes-game",
    productVersion: "1.0",
    }).then((unityInstance) => {
        window.unityInstance = unityInstance;
    }).catch((message) => { alert(message); });
    
    window.addEventListener("message", function(event) {

        if (!event.data || event.data.type !== "INIT_DATA")
            return;

        console.log("Received data from host:", event.data.payload);

        if (typeof window.unityInstance !== "undefined") {
            window.unityInstance.SendMessage(
                "ExternalBridge",
                "OnInitData",
                JSON.stringify(event.data.payload)
            );
        }
    });

    // window.postMessage(
    //     {
    //         type: "INIT_DATA"
    //     },
    //     "*" // you can restrict this to your domain later
    // );

</script>
</body>
</html>
